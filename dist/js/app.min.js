"use strict";function carte(i){$(".map").prepend('<div id="map"></div>');var o=L.map("map",{center:[i.coord.lat,i.coord.lon],zoom:11});L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(o),L.marker([i.coord.lat,i.coord.lon]).addTo(o).bindPopup(i.name).openPopup()}var ville=$("#ville"),villa=$("#villa");$.ajax({url:" https://vicopo.selfbuild.fr/ville/cahors",type:"GET",dataType:"json"}).done(function(){$("#ville").keyup(function(i){if(13==i.keyCode){var o=$(this);$.vicopo(o.val(),function(i,a){i==o.val()&&a[0]&&o.val(a[0].city).vicopoTargets().vicopoClean()}),i.preventDefault(),i.stopPropagation()}})}).fail(function(i){console.log(i)}).always(function(i){});var box=$("#InnerBox"),nom=$("#ville");$("#selec").click(function(){$("#map").remove(),$.ajax({url:"https://api.openweathermap.org/data/2.5/weather?q="+nom.val()+",fr&appid=2304ca0a4c5b96eca86deb93757adbfa",type:"GET",dataType:"json"}).done(function(i){box.html("<ul><li><b>Ville:</b> "+i.name+"</li></br><li><b>Longitude:</b> "+i.coord.lon+"</li><li><b>Lattitude:</b> "+i.coord.lat+"</li></br><li><b>Vent:</b> "+i.wind.speed+" Km/h </li><li><b>Taux d'humidité:</b> "+i.main.humidity+"%</li><li><b>Pression:</b> "+i.main.pressure+"</li></br><li><b>Température:</b> "+(i.main.temp-273.15).toFixed(2)+" °C</li><li><b>Température Min:</b> "+(i.main.temp_min-273.15).toFixed(2)+" °C</li><li><b>Température Max:</b> "+(i.main.temp_max-273.15).toFixed(2)+" °C</li></ul>");$("#map");carte(i)}).fail(function(i){console.log(i)}).always(function(i){})});